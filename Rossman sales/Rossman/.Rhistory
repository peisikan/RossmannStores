setwd("~/Documents/Rossman sales/Rossman")
setwd("~/Documents/Rossman sales/Rossman")
Train<- read.csv("train.csv", header=TURE)
setwd("~/Documents/Rossman sales/Rossman")
Train<- read.csv("train.csv", header=T)
Train[10,]
Train[,10]
Train
Train<- read.csv("train.csv", header=T)
Train[1,]
Train[2,]
Train[1:10,]
library(sqldf) # SQL
install.packages("sqldf")
library(sqldf) # SQL
try1=sqldf(
'select Sales
from Train a
where Store=1'
)
try[1:10,]
try1[1:10,]
try1[1:10,2]
try1[1:10,1]
try1=sqldf(
'select Sales, Date
from Train a
where Store=1'
)
try1=sqldf(
'select Sales, Date
from Train a
where Store=1'
)
try1[1:10,2]
try1[1:10,]
plot(Sales, Date)
plot(Date)
plot(Date)
plot(try1$Date)
plot(tr1$Sales,try1$Date)
plot(try1$Sales,try1$Date)
plot(try1$Sales,try1$Date)
try1$Date
ts1=ts(try1, start=2013, frequency=365)
plot.ts(ts1, ylab="", main="store 1")
ts1=ts(try1$Sales, start=2013, frequency=365)
plot.ts(ts1, ylab="", main="store 1")
par(mfrow=c(2,1))
acf(ts1, 100)
pacf(ts1,100)
plot.ts(ts1, ylab="", main="store 1")
par(mfrow=c(1,1))
plot.ts(ts1, ylab="", main="store 1")
# ACF & PACF
par(mfrow=c(2,1))
acf(ts1, 100)
pacf(ts1,100)
library(sqldf) # SQL
library(astsa)
library(sqldf) # SQL
library(astsa)
setwd("~/Documents/Rossman sales/Rossman")
Train<- read.csv("train.csv", header=T)
try1=sqldf(
'select Sales, Date
from Train a
where Store=1'
)
ts1=ts(try1$Sales, start=2013, frequency=365)
# scatter plot
par(mfrow=c(1,1))
plot.ts(ts1, ylab="", main="store 1")
# ACF & PACF
par(mfrow=c(2,1))
acf(ts1, 100)
pacf(ts1,100)
train = df[idx&df$Store ==1, cols]
library(randomForest)
library(magrittr)
df = read.csv('train.csv')
df$Date%<>%as.Date
dat = df$Date %>% unique
idx = df$Date%in% dat[1:(0.7*length(dat))]
df = df[order(df$Date),]
names(df)
cols = c('Store', 'DayOfWeek', 'Sales', 'Customers', 'Open', 'Promo', 'StateHoliday', "SchoolHoliday")
train = df[idx&df$Store ==1, cols]
dim(train)
train = df[idx&df$Store %in% c(1:5), cols]
test = df[!idx& df$Store %in% c(1:5), cols]
dim(train)
dim(test)
rf = randomForest(Sales~., train)
rf
summary(rf)
varImpPlot(rf)
predf = predict(rf, test)
rm(predf)
pred = predict(rf, test)
pred%>% head
plot(pred - test$Sales)
sqrt(441368)
rf$rsq
str(rf)
summary(rf)
rf
rf$oob.times%>%head
